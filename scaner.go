package main

import (
	"log"
	"net"
	"time"
)

func scanDeviceTarget(threads int, input ...[]string) error {
	// TODO refactor it for the map[int]string, error
	// TODO Device interpretation
	// TODO Make Dial for a few threads (default is 5)
	// Defining basic vars for clearance and making code more readable
	dialtimeout := 1 * time.Second
	urls := input[0]
	ports := input[1]

	for _, url := range urls {
		log.Println("Scanning target " + url)
		for _, port := range ports {
			target := url + ":" + port
			conn, err := net.DialTimeout("tcp4", target, dialtimeout)
			if err == nil {
				log.Println(url + "    " + port + "    opened")
			}
			print(conn)
		}
	}
	return nil
}
